<!doctype html>
<html lang="it">
<meta charset="utf-8" />
<title>Reset PWA</title>
<pre id="log" style="font-family: ui-monospace, SFMono-Regular, Menlo, monospace; padding: 16px;">Reset in corso…</pre>
<script>
(async () => {
  const out = [];
  try {
    if ('serviceWorker' in navigator) {
      const regs = await navigator.serviceWorker.getRegistrations();
      for (const r of regs) {
        await r.unregister();
        out.push('SW unregistered: ' + (r.scope || '(scope sconosciuto)'));
      }
    } else {
      out.push('Service Worker non supportato');
    }
    if ('caches' in self) {
      const keys = await caches.keys();
      for (const k of keys) {
        await caches.delete(k);
        out.push('Cache eliminata: ' + k);
      }
    }
    out.push('Fatto ✅. Torna alla home e ricarica.');
  } catch (e) {
    out.push('Errore: ' + e);
  }
  document.getElementById('log').textContent = out.join('\n');
})();
</script>
